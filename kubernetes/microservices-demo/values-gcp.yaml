# Google Microservices Demo - GKE Standard Configuration
# Minimal configuration that works with GKE Standard
# Load generator disabled to save resources

# Enable load generator to create traffic for metrics
loadGenerator:
  create: true
  # Reduce load for demo environment
  replicaCount: 1

# Use default resources from chart - Autopilot will adjust as needed
# The chart defaults are designed to work with GKE

# OpenTelemetry configuration
opentelemetryCollector:
  create: false  # We deploy our own collector in opentelemetry namespace

# Configure services to send traces to our OpenTelemetry Collector
# Note: Operator-managed collector service name is <name>-collector
default:
  env:
    - name: OTEL_EXPORTER_OTLP_ENDPOINT
      value: "http://otel-collector-collector.opentelemetry.svc.cluster.local:4317"
    - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
      value: cumulative
    - name: OTEL_RESOURCE_ATTRIBUTES
      value: service.namespace=microservices-demo,deployment.environment=demo
    - name: OTEL_SERVICE_NAME
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.labels['app']

# Disable network policies for simplicity in demo
networkPolicies:
  create: false

# Disable service accounts with Workload Identity for simplicity
serviceAccounts:
  create: true
