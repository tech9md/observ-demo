# Google Microservices Demo - GKE Autopilot Compatible
# Minimal configuration that works with GKE Autopilot resource requirements
# GKE Autopilot minimum: 250m CPU, 512Mi memory per container

# Disable load generator to save resources
loadGenerator:
  create: false

# Use default resources from chart - Autopilot will adjust as needed
# The chart defaults are designed to work with GKE

# OpenTelemetry configuration
opentelemetryCollector:
  create: false  # We deploy our own collector in opentelemetry namespace

# Configure services to send traces to our OpenTelemetry Collector
default:
  env:
    - name: OTEL_EXPORTER_OTLP_ENDPOINT
      value: "http://otel-collector-opentelemetry-collector.opentelemetry.svc.cluster.local:4317"
    - name: OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE
      value: cumulative
    - name: OTEL_RESOURCE_ATTRIBUTES
      value: service.namespace=microservices-demo,deployment.environment=demo
    - name: OTEL_SERVICE_NAME
      valueFrom:
        fieldRef:
          apiVersion: v1
          fieldPath: metadata.labels['app']

# Disable network policies for simplicity in demo
networkPolicies:
  create: false

# Disable service accounts with Workload Identity for simplicity
serviceAccounts:
  create: true
